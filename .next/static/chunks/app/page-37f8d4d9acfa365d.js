(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7101:function(e,l,a){Promise.resolve().then(a.bind(a,5322))},5322:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return c}});var t=a(7437),s=a(6648),r=a(2265);let n=[{key:"any",label:"any"},{key:"games",label:"Games catalogue"},{key:"ubisoft",label:"Ubisoft+ classics"},{key:"classics",label:"Classics catalogue"},{key:"monthly",label:"Monthly games"}];function c(){var e;let[l,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(null),[o,d]=(0,r.useState)("any"),[u,m]=(0,r.useState)(""),g=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,[a,t]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let a=setTimeout(()=>t(e),l);return()=>clearTimeout(a)},[e,l]),a}(u,300),x=(0,r.useCallback)(async()=>{i(null);try{let e=await fetch("/api/psplus");if(!e.ok)throw Error("Failed to load data");let l=await e.json();a(l)}catch(l){var e;i(null!==(e=null==l?void 0:l.message)&&void 0!==e?e:"Unknown error")}},[]);(0,r.useEffect)(()=>{x()},[x]),(0,r.useEffect)(()=>{d("any")},[g]);let h=(0,r.useMemo)(()=>{if(!l)return[];let e=l;if("any"!==o&&(e=e.filter(e=>e.categories.includes(o))),g.trim()){let l=g.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(l))}return[...e].sort((e,l)=>e.name.localeCompare(l.name))},[l,o,g]),b=null!==(e=null==l?void 0:l.length)&&void 0!==e?e:0,f=h.length;return(0,t.jsx)("main",{className:"min-h-screen px-6 py-10",children:(0,t.jsxs)("div",{className:"mx-auto max-w-6xl noselect",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-center",children:"PS Plus Extra Games"}),(0,t.jsxs)("p",{className:"text-center text-gray-700 mt-2",children:[f," titles available this month",b&&f!==b?" (of ".concat(b,")"):""]}),(0,t.jsx)("div",{className:"mt-6 flex items-center gap-2",children:(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("input",{"aria-label":"search",placeholder:"search for a game...",value:u,onChange:e=>m(e.target.value),className:"w-full rounded-xl border border-gray-300 px-4 py-3 outline-none focus:ring-2 focus:ring-black/30 bg-white text-black select-text"}),u&&(0,t.jsx)("button",{"aria-label":"clear",onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-black",children:"\xd7"})]})}),(0,t.jsx)("div",{className:"mt-5 flex flex-wrap gap-3",children:n.map(e=>(0,t.jsx)("button",{onClick:()=>d(e.key),className:"px-5 py-2 rounded-xl border border-gray-400 ".concat(o===e.key?"bg-black text-white":"bg-white text-black hover:bg-gray-100"),children:e.label},e.key))}),c&&(0,t.jsx)("div",{className:"mt-6 rounded-lg border border-red-300 bg-red-50 p-4 text-red-900",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:["Failed to load. ",String(c)]}),(0,t.jsx)("button",{onClick:x,className:"rounded-md bg-black text-white px-3 py-1",children:"Retry"})]})}),!l&&!c&&(0,t.jsx)("div",{className:"mt-8 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:Array.from({length:10}).map((e,l)=>(0,t.jsx)("div",{className:"aspect-[3/4] w-full bg-gray-200 rounded-2xl animate-pulse"},l))}),l&&!c&&0===f&&(0,t.jsx)("div",{className:"mt-10 text-center text-gray-600",children:"No games found"}),l&&f>0&&(0,t.jsx)("div",{className:"mt-8 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:h.map(e=>(0,t.jsxs)("div",{className:"noselect",children:[(0,t.jsx)("div",{className:"aspect-[3/4] w-full bg-gray-100 rounded-2xl overflow-hidden border border-gray-300",children:(0,t.jsx)(s.default,{alt:e.name,src:e.imageUrl,width:300,height:400,className:"h-full w-full object-cover",draggable:!1,priority:!1})}),(0,t.jsx)("div",{className:"mt-2 text-center text-sm",children:e.name})]},"".concat(e.id,"-").concat(e.name)))})]})})}}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=7101)}),_N_E=e.O()}]);